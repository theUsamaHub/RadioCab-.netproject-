@model IEnumerable<RadioCab.Models.CompanyVacancy>
@{
    ViewData["Title"] = "VacancyPage";
    Layout = "~/Views/Shared/CompanyLayout.cshtml";
}
<link rel="stylesheet" href="~/Company/css/VacancyPage.css" asp-append-version="true" />
<div class="container">
    <!-- Header -->
    <div class="header-container">
        <div class="row align-items-center">
            <div class="col-md-8">
                <h2><i class="bi bi-briefcase me-2" style="color: var(--accent1);"></i>Vacancy Management System</h2>
                <p class="lead mb-0" style="color: black; font-size:15px;">Track and manage all job vacancies in one place</p>
            </div>
            <div class="col-md-4 text-end">
                <a asp-action="CreateVacancy" asp-controller="Company">
                    <button class="btn btn-secondary btn-lg"><i class="bi bi-plus-circle me-2"></i>New Vacancy</button>
                </a>
            </div>
        </div>
    </div>

    <div class="alert alert-info">
        @if (ViewBag.MaxVacancies == -1)
        {
            <span>Vacancies: Unlimited</span>
        }
        else
        {
            <span>
                Vacancies: @ViewBag.ActiveVacancies / @ViewBag.MaxVacancies
            </span>
        }
    </div>

    <!-- Stats Cards -->
    <div class="row">
        <div class="col-md-3">
            <div class="stats-card">
                <h6 class="text-muted">Total Vacancies</h6>
                <div class="stats-value">@ViewBag.totalVacancy</div>
                <small style="color: var(--secondary);"><i class="bi bi-arrow-up me-1"></i>3 new this month</small>
            </div>
        </div>
        <div class="col-md-3">
            <div class="stats-card">
                <h6 class="text-muted">Approved Vacancies</h6>
                <div class="stats-value">@ViewBag.ApprovedVacancy</div>
                <small style="color: var(--secondary);"><i class="bi bi-eye me-1"></i>Currently hiring</small>
            </div>
        </div>
        <div class="col-md-3">
            <div class="stats-card">
                <h6 class="text-muted">In Pending</h6>
                <div class="stats-value">@ViewBag.PendingVacancy</div>
                <small style="color: var(--primary);"><i class="bi bi-pencil me-1"></i>Under review</small>
            </div>
        </div>
        <div class="col-md-3">
            <div class="stats-card">
                <h6 class="text-muted">Rejected</h6>
                <div class="stats-value">@ViewBag.RejectedVacancy</div>
                <small style="color: var(--accent2);"><i class="bi bi-check-circle me-1"></i>Position filled</small>
            </div>
        </div>
    </div>

    <!-- Filter Section -->
    <div class="filter-container">
        <div class="row">

            <div class="col-md-4">
                <label for="jobTypeFilter" class="form-label">Job Type</label>
                <select class="form-select" id="jobTypeFilter">
                    <option value="">All Types</option>
                    <option value="full time">Full Time</option>
                    <option value="part time">Part Time</option>
                    <option value="contract based">Contract Based</option>
                </select>
            </div>
            <div class="col-md-4">
                <label for="statusFilter" class="form-label">Status</label>
                <select class="form-select" id="statusFilter">
                    <option value="">All Status</option>
                    <option value="approved">Approved</option>
                    <option value="pending">Pending</option>
                    <option value="rejected">Rejected</option>
                </select>
            </div>
            <div class="col-md-4 d-flex align-items-end">
                <button class="btn btn-primary w-100"><i class="bi bi-funnel me-2"></i>Apply Filters</button>
            </div>
        </div>
    </div>

    <!-- Vacancy Table -->
    <div class="vacancy-table-container">
        <div class="table-header">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <h3 class="mb-0">Recent Vacancies</h3>
                </div>
                <div class="col-md-6 text-end">
                    <div class="input-group" style="max-width: 300px; margin-left: auto;">
                        <input type="text" class="form-control" placeholder="Search vacancies...">
                        <button class="btn btn-outline-secondary" type="button"><i class="bi bi-search"></i></button>
                    </div>
                </div>
            </div>
        </div>

        <div class="table-responsive">
            @if (TempData["add"] != null)
            {
                <div class="alert alert-success">
                    @TempData["add"]
                </div>
            }
            @if (TempData["delete"] != null)
            {
                <div class="alert alert-danger">
                    @TempData["delete"]
                </div>
            }
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>Job Title</th>
                        <th>Job Type</th>
                        <th>Required Experience</th>
                        <th>Salary Range</th>
                        <th>Status</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var v in Model)
                    {
                        <tr>
                            <td data-label="Job Title">
                                <div class="d-flex align-items-center">

                                    <div>
                                        <div>@v.JobTitle</div>
                                    </div>
                                </div>
                            </td>
                            <td data-label="Job Type">

                                @if (v.JobType == "Full Time")
                                {
                                    <div class="d-flex align-items-center">
                                        <div class="job-type-icon fulltime-bg">
                                            <i class="bi bi-briefcase"></i>
                                        </div>
                                        Full Time
                                    </div>
                                }
                                else if (v.JobType == "Part Time")
                                {
                                    <div class="d-flex align-items-center">
                                        <div class="job-type-icon parttime-bg">
                                            <i class="bi bi-clock"></i>
                                        </div>
                                        Part Time
                                    </div>
                                }
                                else
                                {
                                    <div class="d-flex align-items-center">
                                        <div class="job-type-icon contract-bg">
                                            <i class="bi bi-file-earmark-text"></i>
                                        </div>
                                        Contract Based
                                    </div>
                                }

                            </td>
                            <td data-label="Required Experience">@v.RequiredExperience</td>
                            <td data-label="Salary Range">
                                <strong>$@v.Salary</strong>

                            </td>
                            <td data-label="Status">
                                @if (v.ApprovalStatus == "Approved")
                                {
                                    <span class="badge-status badge-active">Approved</span>
                                }
                                else if (v.ApprovalStatus == "Pending")
                                {
                                    <span class="badge-status badge-draft">Pending</span>
                                }
                                else
                                {
                                    <span class="badge-status badge-closed">Rejected</span>
                                }

                            </td>
                            <td data-label="Action">
                                <a asp-action="ViewVacancy" asp-controller="Company" asp-route-id="@v.VacancyId" style="text-decoration:none;">
                                    <button class="action-btn view-btn me-1" title="View Details"><i class="bi bi-eye"></i></button>
                                </a>
                                <a asp-action="EditVacancy" asp-controller="Company" asp-route-id="@v.VacancyId" style="text-decoration:none;">
                                    <button class="action-btn edit-btn me-1" title="Edit"><i class="bi bi-pencil"></i></button>
                                </a>
                                <button class="action-btn delete-btn" title="Delete" onclick="confirmDelete(@v.VacancyId)"><i class="bi bi-trash"></i></button>
                            </td>
                        </tr>
                    }

                </tbody>
            </table>
        </div>


    </div>

    <!-- Footer Note -->
    <div class="text-center text-muted mb-5" style="color: var(--neutral-light) !important;">
        <p>Vacancy Management System &copy; 2023 | Streamline your hiring process</p>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="~/Company/js/VacancyPage.js" asp-append-version="true"></script>