@model RadioCab.Models.CDVM
@{
    ViewData["Title"] = "Company Details";
    Layout = "~/Views/Shared/admin.cshtml";
}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
<style>
    :root {
        --dark-blue: #14213d;
        --orange: #fca311;
        --light-gray: #f8f9fa;
        --medium-gray: #e9ecef;
        --success-color: #06d6a0;
        --warning-color: #ffd166;
        --danger-color: #ef476f;
    }

    .compact-card {
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        border: 1px solid var(--medium-gray);
        margin-bottom: 20px;
    }

    .company-header {
        background: linear-gradient(135deg, var(--dark-blue), #1e2a4a);
        color: white;
        padding: 15px;
        border-radius: 8px 8px 0 0;
    }

    .status-badge {
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
    }

    .status-pending {
        background-color: var(--warning-color);
        color: #856404;
    }

    .status-approved {
        background-color: var(--success-color);
        color: #0f5132;
    }

    .status-rejected {
        background-color: var(--danger-color);
        color: white;
    }

    .membership-badge {
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
        background: rgba(252, 163, 17, 0.1);
        color: var(--orange);
        border: 1px solid rgba(252, 163, 17, 0.3);
    }

    .info-label {
        color: #6c757d;
        font-size: 0.85rem;
        font-weight: 500;
        margin-bottom: 2px;
    }

    .info-value {
        color: var(--dark-blue);
        font-size: 0.9rem;
        font-weight: 600;
    }

    .section-title {
        color: var(--dark-blue);
        font-size: 1rem;
        font-weight: 700;
        border-bottom: 2px solid var(--orange);
        padding-bottom: 6px;
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .document-link {
        color: var(--orange);
        text-decoration: none;
        font-size: 0.85rem;
        display: inline-flex;
        align-items: center;
        gap: 4px;
    }

        .document-link:hover {
            color: #e3940f;
            text-decoration: underline;
        }

    .btn-sm {
        padding: 6px 12px;
        font-size: 0.85rem;
    }

    .btn-primary {
        background-color: var(--dark-blue);
        border-color: var(--dark-blue);
    }

        .btn-primary:hover {
            background-color: #1e2a4a;
            border-color: #1e2a4a;
        }

    .back-btn {
        background-color: var(--medium-gray);
        color: var(--dark-blue);
        border: 1px solid #dee2e6;
        font-size: 0.85rem;
    }

    .service-card {
        background: var(--light-gray);
        border-radius: 6px;
        padding: 15px;
        margin-bottom: 10px;
        border-left: 3px solid var(--orange);
    }

    .service-icon {
        width: 40px;
        height: 40px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--dark-blue);
        color: white;
        font-size: 1rem;
    }

    .text-muted {
        color: #6c757d !important;
        font-size: 0.8rem;
    }

    .small {
        font-size: 0.85rem;
    }
</style>

<div class="container-fluid py-3">
    <!-- Back Navigation -->
    <div class="row mb-3">
        <div class="col-12">
            <button onclick="window.history.back()" class="btn btn-sm back-btn">
                <i class="bi bi-arrow-left"></i> Back
            </button>
        </div>
    </div>

    <!-- Company Details Card -->
    <div class="compact-card">
        <!-- Header -->
        <div class="company-header">
            <div class="row align-items-center g-2">
                <div class="col-auto">
                    <div class="service-icon d-flex align-items-center justify-content-center">
                        @if (!string.IsNullOrEmpty(Model.Single_Company.CompanyLogo))
                        {
                            <img src="@Model.Single_Company.CompanyLogo"
                                 alt="Company Logo"
                                 class="img-fluid rounded"
                                 style="width:50px; height:50px; object-fit:contain;"
                                 onerror="this.onerror=null; this.style.display='none'; this.nextElementSibling.style.display='block';" />

                            <!-- Fallback icon if image fails to load -->
                            <i class="bi bi-building" style="font-size:32px; display:none;"></i>
                        }
                        else
                        {
                            <i class="bi bi-building" style="font-size:32px;"></i>
                        }
                    </div>
                </div>
                <div class="col">
                    <div class="d-flex flex-column">
                        <h5 class="mb-1">@Model.Single_Company.CompanyName</h5>
                        <div class="d-flex align-items-center flex-wrap gap-2">
                            <small class="opacity-75">
                                <i class="bi bi-building"></i>
                                ID: COM_@Model.Single_Company.CompanyId
                            </small>
                            <span class="status-badge @Model.Single_Company.RegisterationStatus.ToLower()">
                                @Model.Single_Company.RegisterationStatus
                            </span>
                            <span class="membership-badge">
                                <i class="bi bi-star"></i>
                                @Model.Single_Company.MembershipName
                            </span>
                        </div>
                    </div>
                </div>
                <div class="col-auto">
                    <a asp-controller="Admin" asp-action="SinglePayment" asp-route-id="@Model.Single_Company.UserID"
                       class="btn btn-sm btn-primary">
                        <i class="bi bi-credit-card"></i> Payments
                    </a>
                </div>
            </div>
        </div>

        <!-- Body -->
        <div class="p-3">
            <div class="row g-3">
                <!-- Contact Information -->
                <div class="col-md-6">
                    <div class="mb-3">
                        <h6 class="section-title">
                            <i class="bi bi-person"></i> Contact Info
                        </h6>
                        <div class="row g-2 mb-2">
                            <div class="col-4 info-label">Contact Person</div>
                            <div class="col-8 info-value small">@Model.Single_Company.ContactPerson</div>
                        </div>
                        <div class="row g-2 mb-2">
                            <div class="col-4 info-label">Designation</div>
                            <div class="col-8 info-value small">@Model.Single_Company.Designation</div>
                        </div>
                        <div class="row g-2 mb-2">
                            <div class="col-4 info-label">Email</div>
                            <div class="col-8 info-value small">@Model.Single_Company.CompanyEmail</div>
                        </div>
                        <div class="row g-2 mb-2">
                            <div class="col-4 info-label">Phone</div>
                            <div class="col-8 info-value small">@Model.Single_Company.Telephone</div>
                        </div>
                        <div class="row g-2 mb-2">
                            <div class="col-4 info-label">Fax</div>
                            <div class="col-8 info-value small">@Model.Single_Company.FaxNumber</div>
                        </div>
                    </div>
                </div>

                <!-- Address Information -->
                <div class="col-md-6">
                    <div class="mb-3">
                        <h6 class="section-title">
                            <i class="bi bi-geo-alt"></i> Address
                        </h6>
                        <div class="row g-2 mb-2">
                            <div class="col-4 info-label">Address</div>
                            <div class="col-8 info-value small">@Model.Single_Company.Address</div>
                        </div>
                        <div class="row g-2 mb-2">
                            <div class="col-4 info-label">City</div>
                            <div class="col-8 info-value small">@Model.Single_Company.CityName</div>
                        </div>
                    </div>

                    <!-- Documents -->
                    <div class="mb-3">
                        <h6 class="section-title">
                            <i class="bi bi-files"></i> Documents
                        </h6>
                        <div class="d-flex flex-wrap gap-2">
                            @if (!string.IsNullOrEmpty(Model.Single_Company.FBRCertificate))
                            {
                                <a href="@Model.Single_Company.FBRCertificate"
                                   class="document-link" target="_blank">
                                    <i class="bi bi-file-pdf"></i> FBR
                                </a>
                            }
                            @if (!string.IsNullOrEmpty(Model.Single_Company.BusinessLicense))
                            {
                                <a href="@Model.Single_Company.BusinessLicense"
                                   class="document-link" target="_blank">
                                    <i class="bi bi-file-word"></i> License
                                </a>
                            }
                        </div>
                    </div>
                </div>
            </div>

            <!-- Description -->
            <div class="mt-3">
                <h6 class="section-title">
                    <i class="bi bi-card-text"></i> Description
                </h6>
                <div class="p-3 bg-light rounded small">
                    @Model.Single_Company.Description
                </div>
            </div>
        </div>
    </div>

</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Set active navigation
        const navItem = document.querySelector('[data-page="companies"]');
        if (navItem) {
            navItem.classList.add('active');
        }
    });
</script>